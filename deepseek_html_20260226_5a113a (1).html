<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ä–ø—É—Å –∑–∞ —á–∏—Å—Ç—ã–µ –≤—ã–±–æ—Ä—ã ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s;
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (—Ç—Ä–∏–∫–æ–ª–æ—Ä) */
        body {
            --bg-primary: #f9fbfd;
            --bg-secondary: #edf2f9;
            --text-primary: #1a2639;
            --text-secondary: #2c3e50;
            --accent-blue: #0039a6;
            --accent-red: #d52b1e;
            --accent-white: #ffffff;
            --border-light: #cbd5e1;
            --card-bg: #ffffff;
            --navbar-bg: #0039a6;
            --navbar-text: #ffffff;
            --input-bg: #ffffff;
            --shadow-sm: 0 4px 12px rgba(0, 20, 40, 0.08);
            --shadow-md: 0 8px 24px rgba(0, 20, 40, 0.12);
        }

        /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ */
        body.dark {
            --bg-primary: #121826;
            --bg-secondary: #1e2437;
            --text-primary: #eef2f6;
            --text-secondary: #b0c4de;
            --accent-blue: #3b82f6;
            --accent-red: #f87171;
            --accent-white: #1e293b;
            --border-light: #334155;
            --card-bg: #1e293b;
            --navbar-bg: #0b1120;
            --navbar-text: #f1f5f9;
            --input-bg: #1e293b;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.6);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.8);
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 16px;
        }

        /* –ù–∞–≤–±–∞—Ä */
        .navbar {
            background: var(--navbar-bg);
            color: var(--navbar-text);
            padding: 0.9rem 2.5rem;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            border-bottom: 5px solid var(--accent-red);
            box-shadow: var(--shadow-sm);
        }

        .logo {
            font-size: 1.9rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo span {
            background: var(--accent-red);
            padding: 0.3rem 1rem;
            border-radius: 40px;
            font-size: 1rem;
            color: white;
            font-weight: 600;
        }

        .theme-toggle {
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.25);
            color: white;
            padding: 0.5rem 1.4rem;
            border-radius: 40px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: 0.2s;
        }
        .theme-toggle:hover {
            background: rgba(255,255,255,0.25);
        }

        .user-status {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .role-badge {
            background: var(--accent-red);
            padding: 0.3rem 1.5rem;
            border-radius: 40px;
            font-size: 0.95rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .logout-btn {
            background: transparent;
            border: 1.5px solid white;
            color: white;
            padding: 0.3rem 1.5rem;
            border-radius: 40px;
            cursor: pointer;
            font-weight: 500;
            transition: 0.2s;
        }
        .logout-btn:hover {
            background: white;
            color: var(--navbar-bg);
        }

        /* –ú–µ–Ω—é –≤–∫–ª–∞–¥–æ–∫ */
        .tabs-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
            background: var(--bg-secondary);
            padding: 0.7rem 2.5rem;
            border-bottom: 2px solid var(--accent-blue);
            overflow-x: auto;
            scrollbar-width: thin;
        }

        .tab-btn {
            background: transparent;
            border: none;
            padding: 0.7rem 1.8rem;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            border-radius: 40px 40px 0 0;
            cursor: pointer;
            white-space: nowrap;
            border-bottom: 4px solid transparent;
            transition: 0.15s;
        }

        .tab-btn.active {
            background: var(--accent-blue);
            color: white;
            border-bottom: 4px solid var(--accent-red);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(0, 57, 166, 0.1);
            color: var(--accent-blue);
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            max-width: 1440px;
            margin: 2.2rem auto;
            padding: 0 2.5rem;
        }

        .tab-pane {
            display: none;
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
        }

        .tab-pane.active {
            display: block;
        }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º */
        input, textarea, select {
            padding: 0.9rem 1.4rem;
            border-radius: 20px;
            border: 1.5px solid var(--border-light);
            background: var(--input-bg);
            color: var(--text-primary);
            font-size: 1rem;
            width: 100%;
            margin-bottom: 1.2rem;
            outline: none;
            transition: 0.15s;
        }
        input:focus, textarea:focus, select:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(0, 57, 166, 0.15);
        }

        button.primary, button.secondary {
            padding: 0.9rem 2rem;
            border-radius: 40px;
            font-weight: 700;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: 0.2s;
            width: auto;
            min-width: 160px;
            margin-right: 0.8rem;
            margin-bottom: 0.8rem;
        }

        button.primary {
            background: var(--accent-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 57, 166, 0.3);
        }
        button.primary:hover {
            background: var(--accent-red);
            transform: translateY(-2px);
        }

        button.secondary {
            background: transparent;
            border: 2px solid var(--accent-blue);
            color: var(--accent-blue);
        }
        button.secondary:hover {
            background: var(--accent-blue);
            color: white;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –∏ —Å–µ—Ç–∫–∏ */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .card {
            background: var(--bg-secondary);
            padding: 1.8rem;
            border-radius: 28px;
            border-left: 6px solid var(--accent-red);
            box-shadow: var(--shadow-sm);
            transition: 0.2s;
        }
        .card:hover {
            transform: scale(1.01);
            box-shadow: var(--shadow-md);
        }

        /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–∞ */
        .test-options {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: center;
            margin: 1rem 0 0.5rem;
        }
        .test-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--card-bg);
            padding: 0.6rem 1.4rem;
            border-radius: 40px;
            border: 1.5px solid var(--border-light);
            cursor: pointer;
            transition: 0.1s;
            font-weight: 500;
        }
        .test-option input[type="radio"] {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent-blue);
            border-radius: 50%;
            margin: 0;
            background: transparent;
            transition: 0.1s;
            position: relative;
            cursor: pointer;
        }
        .test-option input[type="radio"]:checked {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            box-shadow: inset 0 0 0 4px var(--card-bg);
        }
        .test-option:hover {
            background: var(--bg-secondary);
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç –£–ò–ö */
        .uik-result {
            background: var(--accent-blue);
            color: white;
            padding: 2rem;
            border-radius: 28px;
            margin: 1.5rem 0;
        }
        .uik-result img {
            max-width: 100%;
            border-radius: 24px;
            margin-top: 1.2rem;
            border: 4px solid white;
        }

        /* –ê–¥–º–∏–Ω-—Å–µ–∫—Ü–∏–∏ */
        .admin-section {
            border: 2px solid var(--border-light);
            border-radius: 28px;
            padding: 2rem;
            margin-bottom: 2.5rem;
            background: var(--bg-secondary);
        }
        .admin-section h3 {
            color: var(--accent-red);
            font-size: 1.7rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px dashed var(--accent-blue);
            padding-bottom: 0.7rem;
        }

        .small-list {
            max-height: 250px;
            overflow-y: auto;
            background: var(--card-bg);
            padding: 1rem 1.5rem;
            border-radius: 24px;
            border: 1px solid var(--border-light);
            font-size: 0.95rem;
        }

        .flex-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            margin: 1.5rem 0;
        }

        /* –ü–æ—Å—Ç—ã –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è */
        .post-item, .viol-item {
            padding: 1rem 0;
            border-bottom: 1px dashed var(--border-light);
        }
        .post-item:last-child, .viol-item:last-child {
            border-bottom: none;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 700px) {
            .navbar {
                padding: 1rem 1.5rem;
                flex-direction: column;
                gap: 12px;
            }
            .tabs-menu {
                padding: 0.5rem 1.5rem;
            }
            .content {
                padding: 0 1.5rem;
            }
            .test-options {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <i class="fas fa-vote-yea"></i> –ö–û–†–ü–£–° –ó–ê –ß–ò–°–¢–´–ï –í–´–ë–û–†–´ <span>c 2008</span>
        </div>
        <div style="display: flex; gap: 18px;">
            <button class="theme-toggle" id="themeToggle"><i class="fas fa-adjust"></i> –¢–µ–º–∞</button>
            <div class="user-status" id="userStatus">
                <span class="role-badge" id="roleDisplay">–ì–æ—Å—Ç—å</span>
                <button class="logout-btn" id="logoutBtn" style="display: none;">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <div class="tabs-menu" id="tabsMenu"></div>
    <div class="content" id="contentArea"></div>

    <script>
        (function() {
            // -------------------- –†–ê–°–®–ò–†–ï–ù–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï --------------------
            const STATE = {
                role: 'guest',               // 'guest', 'observer', 'admin'
                currentObserver: null,
                currentTab: 'about',
                dark: false,

                // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                admin: { login: 'admn58', password: '585858' },

                // –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏
                observers: [
                    { login: 'nabludatelid1', password: '5858581', uicId: 1 },
                    { login: 'nabludatelid2', password: '5858582', uicId: 2 },
                    { login: 'nabludatelid3', password: '5858583', uicId: 3 },
                    { login: 'nabludatelid4', password: '5858584', uicId: 4 },
                ],

                // ---- –£–ò–ö (–±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö) ----
                uics: [
                    { id: 1, number: '–£–ò–ö ‚Ññ101', address: '–≥. –ü–µ–Ω–∑–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞ 1, —à–∫–æ–ª–∞ ‚Ññ1', description: '–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ1, –≤—Ö–æ–¥ —Å —Ç–æ—Ä—Ü–∞, –ø–∞–Ω–¥—É—Å –µ—Å—Ç—å', photo: 'https://via.placeholder.com/800x400?text=–®–∫–æ–ª–∞+1' },
                    { id: 2, number: '–£–ò–ö ‚Ññ205', address: '–≥. –ü–µ–Ω–∑–∞, —É–ª. –ú–æ—Å–∫–æ–≤—Å–∫–∞—è 45, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞', description: '–ì–æ—Ä–æ–¥—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º. –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞, 1 —ç—Ç–∞–∂', photo: 'https://via.placeholder.com/800x400?text=–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞' },
                    { id: 3, number: '–£–ò–ö ‚Ññ312', address: '–≥. –ü–µ–Ω–∑–∞, —É–ª. –ö–∏—Ä–æ–≤–∞ 12, –î–ö "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫"', description: '–î–≤–æ—Ä–µ—Ü –∫—É–ª—å—Ç—É—Ä—ã, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥', photo: 'https://via.placeholder.com/800x400?text=–î–ö' },
                    { id: 4, number: '–£–ò–ö ‚Ññ089', address: '–≥. –ü–µ–Ω–∑–∞, —É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞ 5, –ª–∏—Ü–µ–π ‚Ññ3', description: '–õ–∏—Ü–µ–π, –∫—Ä—ã–ª—å—Ü–æ —Å –∫–æ–ª–æ–Ω–Ω–∞–º–∏', photo: 'https://via.placeholder.com/800x400?text=–õ–∏—Ü–µ–π' },
                    { id: 5, number: '–£–ò–ö ‚Ññ150', address: '–≥. –ü–µ–Ω–∑–∞, —É–ª. –ü–æ–ø–æ–≤–∞ 21, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å', description: '–°–ö "–î–∏–Ω–∞–º–æ", –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ —é–∂–Ω—É—é —Ç—Ä–∏–±—É–Ω—É', photo: 'https://via.placeholder.com/800x400?text=–°–ö' },
                    { id: 6, number: '–£–ò–ö ‚Ññ177', address: '–≥. –ü–µ–Ω–∑–∞, —É–ª. –ö–æ–º–º—É–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∞—è 32, –≥–∏–º–Ω–∞–∑–∏—è ‚Ññ4', description: '–ì–∏–º–Ω–∞–∑–∏—è, –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—Ö–æ–¥', photo: 'https://via.placeholder.com/800x400?text=–ì–∏–º–Ω–∞–∑–∏—è' },
                ],

                // ---- –ù–æ–≤–æ—Å—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è) ----
                newsPosts: [
                    { id: 1, title: '–°—Ç–∞—Ä—Ç–æ–≤–∞–ª –ø—Ä–æ–µ–∫—Ç "–ß–µ—Å—Ç–Ω—ã–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å 2025"', content: '–ú—ã –Ω–∞—á–∞–ª–∏ –Ω–∞–±–æ—Ä –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π –Ω–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –≤—ã–±–æ—Ä—ã. –û–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–π–¥—ë—Ç –≤ 10 –≥–æ—Ä–æ–¥–∞—Ö –æ–±–ª–∞—Å—Ç–∏.', date: '2025-02-10', author: '–ü—Ä–µ—Å—Å-—Å–ª—É–∂–±–∞' },
                    { id: 2, title: '–ò—Ç–æ–≥–∏ –æ–±—É—á–µ–Ω–∏—è –≤ –ü–µ–Ω–∑–µ', content: '–ë–æ–ª–µ–µ 200 –±—É–¥—É—â–∏—Ö –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π –ø—Ä–æ—Å–ª—É—à–∞–ª–∏ –∫—É—Ä—Å –ø–æ –§–ó-67 –∏ –ø–æ–ª—É—á–∏–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.', date: '2025-02-15', author: '–ê–¥–º–∏–Ω' },
                    { id: 3, title: '–í—Å—Ç—Ä–µ—á–∞ —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è–º–∏ –ø–∞—Ä—Ç–∏–π', content: '–û–±—Å—É–¥–∏–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏. –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏.', date: '2025-02-20', author: '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä' },
                    { id: 4, title: '–ù–æ–≤—ã–π –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç –æ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–∏', content: '–í–Ω–µ—Å–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Ä—è–¥–æ–∫ –≤–∏–¥–µ–æ—Ñ–∏–∫—Å–∞—Ü–∏–∏ –Ω–∞ —É—á–∞—Å—Ç–∫–∞—Ö.', date: '2025-02-25', author: '–Æ—Ä–∏—Å—Ç' },
                ],

                // ---- –ü–æ—Å—Ç—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π (–±–ª–æ–≥) ----
                observerPosts: [
                    { id: 1, uicId: 1, author: 'nabludatelid1', text: '–£–ò–ö 101: —É—Ç—Ä–æ –ø—Ä–æ—à–ª–æ —Å–ø–æ–∫–æ–π–Ω–æ, –æ—á–µ—Ä–µ–¥–µ–π –Ω–µ—Ç, –≤—Å—ë —à—Ç–∞—Ç–Ω–æ.', photo: '', timestamp: Date.now() - 86400000 },
                    { id: 2, uicId: 2, author: 'nabludatelid2', text: '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ –æ—Ç –ø–∞—Ä—Ç–∏–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç, –∑–∞–º–µ—á–∞–Ω–∏–π –Ω–µ—Ç, —è–≤–∫–∞ —Å—Ä–µ–¥–Ω—è—è.', photo: '', timestamp: Date.now() - 43200000 },
                    { id: 3, uicId: 3, author: 'nabludatelid3', text: '–î–ö –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫: –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤.', photo: '', timestamp: Date.now() - 7200000 },
                    { id: 4, uicId: 1, author: 'nabludatelid1', text: '–í–µ—á–µ—Ä–Ω–∏–π –æ—Ç—á—ë—Ç: –∑–∞ –¥–µ–Ω—å –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–æ 450 —á–µ–ª–æ–≤–µ–∫, –Ω–∞–¥–æ–º–Ω–æ–µ 12, –Ω–∞—Ä—É—à–µ–Ω–∏–π –Ω–µ—Ç.', photo: '', timestamp: Date.now() - 3600000 },
                    { id: 5, uicId: 4, author: 'nabludatelid4', text: '–õ–∏—Ü–µ–π ‚Ññ3: —Ä–∞–±–æ—Ç–∞—é—Ç –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏, –ø–æ—Ä—è–¥–æ–∫.', photo: '', timestamp: Date.now() - 1800000 },
                ],

                // ---- –ù–∞—Ä—É—à–µ–Ω–∏—è (—Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π) ----
                violations: [
                    { id: 1, uicId: 2, degree: '–°—Ä–µ–¥–Ω—è—è', culprit: '–ß–ª–µ–Ω –∫–æ–º–∏—Å—Å–∏–∏', desc: '–ù–µ–∑–∞–∫–æ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è', photo: '', time: Date.now() - 5000000 },
                    { id: 2, uicId: 5, degree: '–í—ã—Å–æ–∫–∞—è', culprit: '–ò–∑–±–∏—Ä–∞—Ç–µ–ª—å', desc: '–ü–æ–ø—ã—Ç–∫–∞ –≤–±—Ä–æ—Å–∞ –ø–∞—á–∫–∏ –±—é–ª–ª–µ—Ç–µ–Ω–µ–π', photo: '', time: Date.now() - 2000000 },
                ],

                // ---- –û—Ç—á—ë—Ç—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π ----
                reports: [
                    { id: 1, uicId: 1, violCount: 0, voters: 450, homeVoters: 12, homeVisit: true, date: Date.now() - 10000000 },
                    { id: 2, uicId: 2, violCount: 1, voters: 320, homeVoters: 8, homeVisit: false, date: Date.now() - 9000000 },
                ],

                // ---- –ü—Ä–æ—Ç–æ–∫–æ–ª—ã ----
                protocols: [
                    { id: 1, uicId: 1, file: 'protokol101.pdf', date: Date.now() - 20000000 },
                    { id: 2, uicId: 3, file: 'protokol312.pdf', date: Date.now() - 15000000 },
                ],

                // ---- –ó–∞—è–≤–∫–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ----
                applications: [
                    { id: 1, fio: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', phone: '+7-987-654-32-10', info: '–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –Ω–∞ –ø—Ä–æ—à–ª—ã—Ö –≤—ã–±–æ—Ä–∞—Ö', reason: '–•–æ—á—É —á–µ—Å—Ç–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤', citizen: true, age18: true, criminal: false, consent: true },
                    { id: 2, fio: '–ú–∞—Ä–∏—è –°–º–∏—Ä–Ω–æ–≤–∞', phone: '+7-912-345-67-89', info: '–Æ—Ä–∏—Å—Ç', reason: '–ò–Ω—Ç–µ—Ä–µ—Å –∫ –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É', citizen: true, age18: true, criminal: false, consent: true },
                ],

                // ---- –¢–µ—Å—Ç—ã (–∞–¥–º–∏–Ω —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç) ----
                tests: [
                    { id: 1, question: '–í –∫–∞–∫–æ–º –≥–æ–¥—É –ø—Ä–∏–Ω—è—Ç –§–ó-67 "–û–± –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥–∞—Ä–∞–Ω—Ç–∏—è—Ö –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤"?', options: ['1997', '2002', '2005'], correct: 1 },
                    { id: 2, question: '–ß—Ç–æ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ —è–≤–ª—è–µ—Ç—Å—è –≥—Ä—É–±—ã–º –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º?', options: ['–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å —Å –±–ª–æ–∫–Ω–æ—Ç–æ–º', '–í–±—Ä–æ—Å –ø–∞—á–∫–∏ –±—é–ª–ª–µ—Ç–µ–Ω–µ–π', '–ò–∑–±–∏—Ä–∞—Ç–µ–ª—å —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º'], correct: 1 },
                    { id: 3, question: '–ö—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–¥—Å—á—ë—Ç–µ –≥–æ–ª–æ—Å–æ–≤?', options: ['–¢–æ–ª—å–∫–æ —á–ª–µ–Ω—ã –£–ò–ö', '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏, –°–ú–ò, —á–ª–µ–Ω—ã –£–ò–ö', '–í—Å–µ –∂–µ–ª–∞—é—â–∏–µ'], correct: 1 },
                    { id: 4, question: '–ú–æ–∂–Ω–æ –ª–∏ –∞–≥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –¥–µ–Ω—å –≤—ã–±–æ—Ä–æ–≤?', options: ['–î–∞, –≤–µ–∑–¥–µ', '–ù–µ—Ç, –∑–∞–ø—Ä–µ—â–µ–Ω–æ', '–¢–æ–ª—å–∫–æ –¥–æ 8 —É—Ç—Ä–∞'], correct: 1 },
                    { id: 5, question: '–ö–∞–∫–æ–≤–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –£–ò–ö?', options: ['3-18 —á–ª–µ–Ω–æ–≤', '5-15', '10-20'], correct: 0 },
                    { id: 6, question: '–ß—Ç–æ —Ç–∞–∫–æ–µ "–Ω–∞–¥–æ–º–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ"?', options: ['–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –≤–Ω–µ –ø–æ–º–µ—â–µ–Ω–∏—è', '–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –ø–æ –ø–æ—á—Ç–µ', '–î–æ—Å—Ä–æ—á–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ'], correct: 0 },
                ],

                // ---- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ) ----
                idQuestions: [
                    { id: 0, question: '–ö—Ç–æ —Å–æ–≤–µ—Ä—à–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ?', answers: [
                        { text: '–ß–ª–µ–Ω –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏', next: 1 },
                        { text: '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å', next: 2 },
                        { text: '–ò–∑–±–∏—Ä–∞—Ç–µ–ª—å', next: 3 },
                        { text: '–ö–∞–Ω–¥–∏–¥–∞—Ç', next: 4 }
                    ]},
                    { id: 1, question: '–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —á–ª–µ–Ω –∫–æ–º–∏—Å—Å–∏–∏?', answers: [
                        { text: '–í—ã–¥–∞—ë—Ç –±—é–ª–ª–µ—Ç–µ–Ω—å –±–µ–∑ –ø–∞—Å–ø–æ—Ä—Ç–∞', result: '–ù–∞—Ä—É—à–µ–Ω–∏–µ: —Å—Ç. 64 –§–ó-67 (–≤—ã–¥–∞—á–∞ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞)', violation: true },
                        { text: '–ü–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –±—é–ª–ª–µ—Ç–µ–Ω—å –ø–æ –ø—Ä–æ—Å—å–±–µ', result: '–ù–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –µ—Å–ª–∏ –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç', violation: false },
                        { text: '–í–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–∞—á–∫—É –±—é–ª–ª–µ—Ç–µ–Ω–µ–π', result: '–ì—Ä—É–±–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ (—Å—Ç. 142 –£–ö –†–§, —Ñ–∞–ª—å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)', violation: true },
                        { text: '–£–¥–∞–ª—è–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –±–µ–∑ —Ä–µ—à–µ–Ω–∏—è —Å—É–¥–∞', result: '–ù–∞—Ä—É—à–µ–Ω–∏–µ (—Å—Ç. 30 –§–ó-67)', violation: true }
                    ]},
                    { id: 2, question: '–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å?', answers: [
                        { text: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–µ—Ç –±—é–ª–ª–µ—Ç–µ–Ω–∏', result: '–ù–∞—Ä—É—à–µ–Ω–∏–µ —Ç–∞–π–Ω—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (—Å—Ç. 7 –§–ó-67)', violation: true },
                        { text: '–í–µ–¥—ë—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–∞–±–ª—é–¥–µ–Ω–∏—è', result: '–ù–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –ø—Ä—è–º–∞—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å', violation: false },
                        { text: '–û–±—â–∞–µ—Ç—Å—è —Å –∏–∑–±–∏—Ä–∞—Ç–µ–ª—è–º–∏', result: '–ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º, –µ—Å–ª–∏ –∞–≥–∏—Ç–∏—Ä—É–µ—Ç', violation: true },
                        { text: '–°–ª–µ–¥–∏—Ç –∑–∞ –ø–æ–¥—Å—á—ë—Ç–æ–º', result: '–ù–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ', violation: false }
                    ]},
                    { id: 3, question: '–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å?', answers: [
                        { text: '–û—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–º–µ—Ç–∫—É –∫–∞—Ä–∞–Ω–¥–∞—à–æ–º', result: '–ù–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –Ω–æ –±—é–ª–ª–µ—Ç–µ–Ω—å –º–æ–≥—É—Ç –ø—Ä–∏–∑–Ω–∞—Ç—å –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º', violation: false },
                        { text: '–í—ã–Ω–æ—Å–∏—Ç –±—é–ª–ª–µ—Ç–µ–Ω—å –∏–∑ —É—á–∞—Å—Ç–∫–∞', result: '–ù–∞—Ä—É—à–µ–Ω–∏–µ (—Å—Ç. 5.22 –ö–æ–ê–ü)', violation: true },
                        { text: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–µ—Ç –±—é–ª–ª–µ—Ç–µ–Ω—å', result: '–ù–∞—Ä—É—à–µ–Ω–∏–µ —Ç–∞–π–Ω—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è', violation: true }
                    ]},
                    { id: 4, question: '–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç?', answers: [
                        { text: '–ê–≥–∏—Ç–∏—Ä—É–µ—Ç –≤ 10 –º–µ—Ç—Ä–∞—Ö –æ—Ç —É—á–∞—Å—Ç–∫–∞', result: '–ù–∞—Ä—É—à–µ–Ω–∏–µ (–∑–∞–ø—Ä–µ—â–µ–Ω–æ –±–ª–∏–∂–µ 50 –º)', violation: true },
                        { text: '–ù–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –ø–æ–¥—Å—á—ë—Ç–æ–º', result: '–ù–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ', violation: false },
                        { text: '–†–∞–∑–¥–∞–µ—Ç –ø–æ–¥–∞—Ä–∫–∏ –∏–∑–±–∏—Ä–∞—Ç–µ–ª—è–º', result: '–ü–æ–¥–∫—É–ø, –Ω–∞—Ä—É—à–µ–Ω–∏–µ', violation: true }
                    ]}
                ],

                idCurrentStep: 0,
                idHistory: [],

                // ---- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç ----
                aboutText: '¬´–ö–æ—Ä–ø—É—Å –∑–∞ —á–∏—Å—Ç—ã–µ –≤—ã–±–æ—Ä—ã¬ª ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ –≤ 2008 –≥–æ–¥—É. –ó–∞ 15 –ª–µ—Ç –º—ã –ø—Ä–æ–≤–µ–ª–∏ –±–æ–ª–µ–µ 10 –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π —Ä–∞–∑–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ —Å–≤—ã—à–µ 5000 –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π. –ù–∞—à–∞ –º–∏—Å—Å–∏—è ‚Äî —á–µ—Å—Ç–Ω—ã–µ, –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –∏ –ª–µ–≥–∏—Ç–∏–º–Ω—ã–µ –≤—ã–±–æ—Ä—ã. –ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º —é—Ä–∏—Å—Ç–æ–≤, –ø–æ–ª–∏—Ç–æ–ª–æ–≥–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∏—Ö —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –§–ó-67. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å! –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –≤ –ü–µ–Ω–∑–µ –∏ –æ–±–ª–∞—Å—Ç–∏, –ø—Ä–æ–≤–æ–¥–∏–º —Å–µ–º–∏–Ω–∞—Ä—ã, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.',
                contactsText: 'üìû +7 (8412) 55-55-55   ‚úâÔ∏è info@korpusviborov.ru   üìç –≥. –ü–µ–Ω–∑–∞, —É–ª. –ú–æ—Å–∫–æ–≤—Å–∫–∞—è, 27, –æ—Ñ–∏—Å 305 (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ 10:00‚Äì19:00)'
            };

            // ---------- –£—Ç–∏–ª–∏—Ç—ã ----------
            function generateObserverLogin() {
                let maxNum = 0;
                STATE.observers.forEach(o => {
                    let m = o.login.match(/nabludatelid(\d+)/);
                    if (m) maxNum = Math.max(maxNum, +m[1]);
                });
                let newNum = maxNum + 1;
                return { login: `nabludatelid${newNum}`, password: `585858${newNum}` };
            }

            // ---------- –†–µ–Ω–¥–µ—Ä –≤–∫–ª–∞–¥–æ–∫ ----------
            function renderTabs() {
                const menu = document.getElementById('tabsMenu');
                let tabs = [];
                if (STATE.role === 'guest') {
                    tabs = ['about', 'blog', 'map', 'test', 'apply', 'contacts', 'login'];
                } else if (STATE.role === 'observer') {
                    tabs = ['map', 'writePost', 'violation', 'sendReport', 'sendProtocol', 'identification'];
                } else if (STATE.role === 'admin') {
                    // –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + admin-–ø–∞–Ω–µ–ª—å (–æ–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π)
                    tabs = ['about', 'blog', 'map', 'test', 'apply', 'contacts', 'admin', 'login'];
                }
                menu.innerHTML = tabs.map(t => {
                    let names = {
                        about:'–û –Ω–∞—Å', blog:'–ë–ª–æ–≥', map:'–ö–∞—Ä—Ç–∞ –£–ò–ö', test:'–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
                        apply:'–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É', contacts:'–ö–æ–Ω—Ç–∞–∫—Ç—ã', login:'–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è',
                        writePost:'–ù–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç', violation:'–ù–∞—Ä—É—à–µ–Ω–∏–µ', sendReport:'–û—Ç—á—ë—Ç',
                        sendProtocol:'–ü—Ä–æ—Ç–æ–∫–æ–ª', identification:'–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', admin:'–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å'
                    };
                    return `<button class="tab-btn ${STATE.currentTab === t ? 'active' : ''}" data-tab="${t}">${names[t]||t}</button>`;
                }).join('');

                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        STATE.currentTab = btn.dataset.tab;
                        renderTabs();
                        renderContent();
                    });
                });

                document.getElementById('roleDisplay').innerText = 
                    STATE.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : (STATE.role === 'observer' ? '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å' : '–ì–æ—Å—Ç—å');
                document.getElementById('logoutBtn').style.display = STATE.role !== 'guest' ? 'inline-block' : 'none';
            }

            // ---------- –†–µ–Ω–¥–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∫–∞–∂–¥–∞—è –≤–∫–ª–∞–¥–∫–∞) ----------
            function renderContent() {
                const area = document.getElementById('contentArea');
                const tab = STATE.currentTab;
                let html = '<div class="tab-pane active">';

                if (tab === 'about') html += renderAbout();
                else if (tab === 'blog') html += renderBlog();
                else if (tab === 'map') html += renderMap();
                else if (tab === 'test') html += renderTest();
                else if (tab === 'apply') html += renderApply();
                else if (tab === 'contacts') html += renderContacts();
                else if (tab === 'login') html += renderLogin();
                else if (tab === 'writePost') html += renderWritePost();
                else if (tab === 'violation') html += renderViolation();
                else if (tab === 'sendReport') html += renderSendReport();
                else if (tab === 'sendProtocol') html += renderSendProtocol();
                else if (tab === 'identification') html += renderIdentification();
                else if (tab === 'admin') html += renderAdminPanel();
                else html += '<p>–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</p>';

                html += '</div>';
                area.innerHTML = html;
                attachEventListeners();
            }

            // ---------- –†–µ–Ω–¥–µ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü (—Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º) ----------
            function renderAbout() {
                return `
                    <h2 style="font-size:2.2rem; margin-bottom:1.5rem;"><i class="fas fa-flag" style="color:var(--accent-red);"></i> –û –Ω–∞—Å</h2>
                    <p style="font-size:1.3rem; line-height:1.8; background:var(--bg-secondary); padding:2rem; border-radius:32px;">${STATE.aboutText}</p>
                    <div style="display:flex; gap:3rem; margin-top:2rem; font-size:1.2rem;">
                        <span><i class="fas fa-check-circle" style="color:var(--accent-blue);"></i> 10+ –∫–∞–º–ø–∞–Ω–∏–π</span>
                        <span><i class="fas fa-users" style="color:var(--accent-blue);"></i> 5000+ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π</span>
                        <span><i class="fas fa-gavel" style="color:var(--accent-blue);"></i> –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å</span>
                    </div>
                `;
            }

            function renderBlog() {
                let news = STATE.newsPosts.map(n => `
                    <div class="card"><h3>üì∞ ${n.title}</h3><p>${n.content}</p><small>${n.date} / ${n.author}</small></div>
                `).join('');
                let obs = STATE.observerPosts.map(p => {
                    let uic = STATE.uics.find(u => u.id === p.uicId)?.number || '–£–ò–ö';
                    return `<div class="post-item"><i class="fas fa-eye" style="color:var(--accent-blue);"></i> <strong>${uic}</strong> (${new Date(p.timestamp).toLocaleString()})<br>${p.text}</div>`;
                }).join('');
                return `
                    <h2 style="font-size:2rem;">üì¢ –ë–ª–æ–≥ –∏ –Ω–æ–≤–æ—Å—Ç–∏</h2>
                    <div class="card-grid">${news}</div>
                    <h3 style="margin:2rem 0 1rem;">üìù –ü–æ—Å—Ç—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π</h3>
                    <div class="small-list">${obs}</div>
                `;
            }

            function renderMap() {
                return `
                    <h2 style="font-size:2rem;">üó∫Ô∏è –ö–∞—Ä—Ç–∞ –£–ò–ö –ü–µ–Ω–∑–µ–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</h2>
                    <div style="display:flex; flex-wrap:wrap; gap:3rem;">
                        <div style="flex:2;">
                            <input type="text" id="addressInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –õ–µ–Ω–∏–Ω–∞ 1" style="font-size:1.1rem;">
                            <button class="primary" id="searchUicBtn"><i class="fas fa-search"></i> –ù–∞–π—Ç–∏ —É—á–∞—Å—Ç–æ–∫</button>
                            <div id="uicResult" class="uik-result"></div>
                        </div>
                        <div style="flex:1;">
                            <h3>–°–≤–µ–∂–∏–µ –ø–æ—Å—Ç—ã</h3>
                            <div class="small-list">
                                ${STATE.observerPosts.slice(-3).map(p => `<div>${p.text.substring(0,60)}‚Ä¶</div>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            function renderTest() {
                let qHtml = STATE.tests.map((q, idx) => `
                    <div class="card" style="margin-bottom:2rem;">
                        <p style="font-size:1.3rem; font-weight:600; margin-bottom:1rem;">${q.question}</p>
                        <div class="test-options">
                            ${q.options.map((opt, optIdx) => `
                                <label class="test-option">
                                    <input type="radio" name="q${idx}" value="${optIdx}">
                                    <span>${opt}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
                return `
                    <h2 style="font-size:2rem;">üìù –¢–µ—Å—Ç: –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ</h2>
                    ${qHtml}
                    <button class="primary" id="submitTest" style="font-size:1.2rem;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                    <div id="testResult" style="margin-top:2rem; font-size:1.4rem;"></div>
                `;
            }

            function renderApply() {
                return `
                    <h2 style="font-size:2rem;">üìã –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏</h2>
                    <form id="applyForm" style="max-width:700px;">
                        <input type="text" placeholder="–§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é" id="fio" required>
                        <input type="tel" placeholder="–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω" id="phone" required>
                        <textarea placeholder="–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–±–µ (–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –æ–ø—ã—Ç)" id="info" rows="3"></textarea>
                        <textarea placeholder="–ü–æ—á–µ–º—É —Ö–æ—Ç–∏—Ç–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å?" id="reason" rows="3"></textarea>
                        <div style="display:flex; flex-wrap:wrap; gap:1.5rem; margin:1rem 0;">
                            <label><input type="checkbox" id="citizen"> –ì—Ä–∞–∂–¥–∞–Ω–∏–Ω –†–§</label>
                            <label><input type="checkbox" id="age18"> 18+</label>
                            <label><input type="checkbox" id="criminal"> –ù–µ—Ç —Å—É–¥–∏–º–æ—Å—Ç–∏</label>
                            <label><input type="checkbox" id="consent"> –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É</label>
                        </div>
                        <button type="submit" class="primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                    </form>
                `;
            }

            function renderContacts() {
                return `
                    <h2 style="font-size:2rem;">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
                    <p style="font-size:1.5rem; background:var(--bg-secondary); padding:2rem; border-radius:32px;">${STATE.contactsText}</p>
                `;
            }

            function renderLogin() {
                return `
                    <h2 style="font-size:2rem;">üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
                    <div style="max-width:450px;">
                        <input type="text" id="loginInput" placeholder="–õ–æ–≥–∏–Ω" style="font-size:1.1rem;">
                        <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" style="font-size:1.1rem;">
                        <button class="primary" id="loginBtn">–í–æ–π—Ç–∏</button>
                        <p id="loginMessage" style="color:var(--accent-red); margin-top:1rem;"></p>
                    </div>
                `;
            }

            // --- –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å ---
            function renderWritePost() {
                let opts = STATE.uics.map(u => `<option value="${u.id}">${u.number} ‚Äî ${u.address.substring(0,30)}</option>`);
                return `
                    <h2>‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç –æ —Å–∏—Ç—É–∞—Ü–∏–∏ –Ω–∞ –£–ò–ö</h2>
                    <p style="color: var(--accent-red);">–ú–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤. –§–æ—Ç–æ –±–µ–∑ –∫—Ä—É–ø–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ –ª–∏—Ü.</p>
                    <select id="postUic">${opts}</select>
                    <textarea id="postText" placeholder="–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞..." rows="4"></textarea>
                    <input type="file" id="postPhoto" accept="image/*">
                    <button class="primary" id="submitPost">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                `;
            }

            function renderViolation() {
                return `
                    <h2>‚ö†Ô∏è –°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏</h2>
                    <select id="violUic">${STATE.uics.map(u => `<option value="${u.id}">${u.number}</option>`)}</select>
                    <select id="violDegree"><option>–ù–∏–∑–∫–∞—è —Å—Ç–µ–ø–µ–Ω—å</option><option>–°—Ä–µ–¥–Ω—è—è —Å—Ç–µ–ø–µ–Ω—å</option><option>–í—ã—Å–æ–∫–∞—è —Å—Ç–µ–ø–µ–Ω—å</option></select>
                    <input id="violCulprit" placeholder="–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (–∫–æ–º–∏—Å—Å–∏—è, –∫–∞–Ω–¥–∏–¥–∞—Ç, –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å...)">
                    <textarea id="violDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è" rows="3"></textarea>
                    <input type="file" id="violPhoto" accept="image/*">
                    <button class="primary" id="submitViol">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                `;
            }

            function renderSendReport() {
                return `
                    <h2>üìä –û—Ç—á—ë—Ç –∑–∞ –¥–µ–Ω—å</h2>
                    <select id="reportUic">${STATE.uics.map(u => `<option value="${u.id}">${u.number}</option>`)}</select>
                    <input type="number" id="reportViol" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Ä—É—à–µ–Ω–∏–π">
                    <input type="number" id="reportVoters" placeholder="–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–æ –≤—Å–µ–≥–æ">
                    <input type="number" id="reportHomeVoters" placeholder="–ù–∞–¥–æ–º–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (—á–µ–ª)">
                    <label style="display:flex; align-items:center; gap:0.5rem;"><input type="checkbox" id="reportHomeVisit"> –ë—ã–ª –≤—ã–µ–∑–¥ –Ω–∞–¥–æ–º–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è</label>
                    <button class="primary" id="submitReport">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç</button>
                `;
            }

            function renderSendProtocol() {
                return `
                    <h2>üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª</h2>
                    <select id="protocolUic">${STATE.uics.map(u => `<option value="${u.id}">${u.number}</option>`)}</select>
                    <input type="file" id="protocolFile" accept=".pdf,.jpg,.png">
                    <button class="primary" id="submitProtocol">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                `;
            }

            function renderIdentification() {
                let step = STATE.idCurrentStep;
                let q = STATE.idQuestions[step];
                if (!q) {
                    STATE.idCurrentStep = 0;
                    q = STATE.idQuestions[0];
                }
                let answersHtml = q.answers.map((a, i) => {
                    return `<button class="secondary" style="width:100%; text-align:left; margin-bottom:0.8rem;" data-ans-index="${i}">${a.text}</button>`;
                }).join('');
                return `
                    <h2>üîç –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏—è (–§–ó-67)</h2>
                    <div class="card" style="background:var(--accent-blue); color:white;">
                        <p style="font-size:1.5rem;">${q.question}</p>
                    </div>
                    <div style="margin:1.5rem 0;">${answersHtml}</div>
                    <div id="idResult"></div>
                    <button class="secondary" id="resetId">‚ü≤ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                `;
            }

            // --- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è) ---
            function renderAdminPanel() {
                let uicList = STATE.uics.map(u => `<li><b>${u.number}</b> ${u.address} <button class="secondary" data-del-uic="${u.id}" style="padding:0.3rem 1rem;">–£–¥–∞–ª–∏—Ç—å</button></li>`).join('');
                let obsList = STATE.observers.map(o => `<li>${o.login} (–£–ò–ö ${o.uicId}) –ø–∞—Ä–æ–ª—å ${o.password}</li>`).join('');
                let apps = STATE.applications.map(a => `<li><b>${a.fio}</b> ${a.phone} <button data-del-app="${a.id}" style="margin-left:1rem;">‚úì</button></li>`).join('');
                let postsAdmin = STATE.observerPosts.map(p => `<li>–£–ò–ö ${p.uicId} | ${p.text.substring(0,50)}‚Ä¶ <button data-del-post="${p.id}">üóëÔ∏è</button></li>`).join('');
                let violAdmin = STATE.violations.map(v => `<li>–£–ò–ö ${v.uicId} | ${v.desc} <button data-del-viol="${v.id}">üóëÔ∏è</button></li>`).join('');
                let reportsAdmin = STATE.reports.map(r => `<li>–£–ò–ö ${r.uicId} –Ω–∞—Ä—É—à:${r.violCount} –∏–∑–±:${r.voters}</li>`).join('');
                let protocolsAdmin = STATE.protocols.map(p => `<li>–£–ò–ö ${p.uicId} —Ñ–∞–π–ª ${p.file}</li>`).join('');

                // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
                let testOptionsInput = `
                    <div style="margin-top:2rem;">
                        <h4>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å —Ç–µ—Å—Ç–∞</h4>
                        <input id="newQuestion" placeholder="–í–æ–ø—Ä–æ—Å">
                        <div class="flex-row">
                            <input id="newOpt1" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 1" style="width:200px;">
                            <input id="newOpt2" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 2" style="width:200px;">
                            <input id="newOpt3" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 3" style="width:200px;">
                        </div>
                        <select id="newCorrect"><option value="0">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π 1</option><option value="1">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π 2</option><option value="2">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π 3</option></select>
                        <button class="primary" id="addTestBtn">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                    </div>
                `;

                return `
                    <h2>‚öôÔ∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å)</h2>
                    
                    <div class="admin-section">
                        <h3>üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –£–ò–ö</h3>
                        <ul class="small-list">${uicList || '–Ω–µ—Ç'}</ul>
                        <div class="flex-row">
                            <input id="newUicNumber" placeholder="–ù–æ–º–µ—Ä –£–ò–ö" style="width:150px;">
                            <input id="newUicAddress" placeholder="–ê–¥—Ä–µ—Å" style="width:300px;">
                            <input id="newUicDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" style="width:250px;">
                            <button class="primary" id="addUic">–î–æ–±–∞–≤–∏—Ç—å –£–ò–ö</button>
                        </div>
                    </div>

                    <div class="admin-section">
                        <h3>üë• –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏</h3>
                        <ul class="small-list">${obsList}</ul>
                        <button class="primary" id="addObserverBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è</button>
                    </div>

                    <div class="admin-section">
                        <h3>üì¨ –ó–∞—è–≤–∫–∏ –Ω–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</h3>
                        <ul class="small-list">${apps || '–Ω–µ—Ç'}</ul>
                    </div>

                    <div class="admin-section">
                        <h3>üìù –ü–æ—Å—Ç—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π (–º–æ–¥–µ—Ä–∞—Ü–∏—è)</h3>
                        <ul class="small-list">${postsAdmin}</ul>
                    </div>

                    <div class="admin-section">
                        <h3>‚ö†Ô∏è –°–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö</h3>
                        <ul class="small-list">${violAdmin}</ul>
                    </div>

                    <div class="admin-section">
                        <h3>üìä –û—Ç—á—ë—Ç—ã –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã</h3>
                        <p><b>–û—Ç—á—ë—Ç—ã:</b> ${reportsAdmin}</p>
                        <p><b>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã:</b> ${protocolsAdmin}</p>
                    </div>

                    <div class="admin-section">
                        <h3>üìã –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤</h3>
                        <ul class="small-list">
                            ${STATE.tests.map(t => `<li>${t.question} <button data-del-test="${t.id}">–£–¥–∞–ª–∏—Ç—å</button></li>`).join('')}
                        </ul>
                        ${testOptionsInput}
                    </div>

                    <div class="admin-section">
                        <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤</h3>
                        <label>–û –Ω–∞—Å:</label>
                        <textarea id="editAbout" rows="3">${STATE.aboutText}</textarea>
                        <label>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</label>
                        <input id="editContacts" value="${STATE.contactsText}" style="width:100%;">
                        <button class="primary" id="saveContent">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    </div>
                `;
            }

            // ---------- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π (–≤—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã) ----------
            function attachEventListeners() {
                // –ü–æ–∏—Å–∫ –£–ò–ö
                const searchBtn = document.getElementById('searchUicBtn');
                if (searchBtn) {
                    searchBtn.addEventListener('click', () => {
                        let addr = document.getElementById('addressInput').value.toLowerCase();
                        let found = STATE.uics.find(u => u.address.toLowerCase().includes(addr)) || STATE.uics[0];
                        document.getElementById('uicResult').innerHTML = `
                            <h3 style="font-size:1.8rem;">${found.number}</h3>
                            <p>${found.address}</p>
                            <p>${found.description}</p>
                            <img src="${found.photo}" alt="–£–ò–ö" style="max-width:100%;">
                        `;
                    });
                }

                // –¢–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä–∫–∞
                const testBtn = document.getElementById('submitTest');
                if (testBtn) {
                    testBtn.addEventListener('click', () => {
                        let correct = 0;
                        STATE.tests.forEach((q, idx) => {
                            let sel = document.querySelector(`input[name="q${idx}"]:checked`);
                            if (sel && parseInt(sel.value) === q.correct) correct++;
                        });
                        document.getElementById('testResult').innerHTML = `
                            <div class="card" style="background:var(--accent-blue); color:white; text-align:center;">
                                ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correct} –∏–∑ ${STATE.tests.length}. –í—ã ‚Äî –∑–Ω–∞—Ç–æ–∫ –≤—ã–±–æ—Ä–æ–≤!
                            </div>
                        `;
                    });
                }

                // –ó–∞—è–≤–∫–∞
                const applyForm = document.getElementById('applyForm');
                if (applyForm) {
                    applyForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        let fio = document.getElementById('fio').value;
                        let phone = document.getElementById('phone').value;
                        let newId = STATE.applications.length + 1;
                        STATE.applications.push({ id: newId, fio, phone, info: '', reason: '', citizen: true, age18: true, criminal: false, consent: true });
                        alert('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
                        applyForm.reset();
                    });
                }

                // –õ–æ–≥–∏–Ω
                const loginBtn = document.getElementById('loginBtn');
                if (loginBtn) {
                    loginBtn.addEventListener('click', () => {
                        let login = document.getElementById('loginInput').value;
                        let pass = document.getElementById('passwordInput').value;
                        if (login === STATE.admin.login && pass === STATE.admin.password) {
                            STATE.role = 'admin';
                            STATE.currentTab = 'about';
                        } else {
                            let obs = STATE.observers.find(o => o.login === login && o.password === pass);
                            if (obs) {
                                STATE.role = 'observer';
                                STATE.currentObserver = obs;
                                STATE.currentTab = 'map';
                            } else {
                                document.getElementById('loginMessage').innerText = '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å';
                                return;
                            }
                        }
                        renderTabs();
                        renderContent();
                    });
                }

                // Logout
                document.getElementById('logoutBtn')?.addEventListener('click', () => {
                    STATE.role = 'guest';
                    STATE.currentObserver = null;
                    STATE.currentTab = 'about';
                    renderTabs();
                    renderContent();
                });

                // –ù–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç
                const postBtn = document.getElementById('submitPost');
                if (postBtn) {
                    postBtn.addEventListener('click', () => {
                        let uicId = parseInt(document.getElementById('postUic').value);
                        let txt = document.getElementById('postText').value;
                        if (txt.length < 50) { alert('–ú–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤'); return; }
                        let newId = STATE.observerPosts.length + 1;
                        STATE.observerPosts.push({ id: newId, uicId, author: STATE.currentObserver?.login, text: txt, photo: '', timestamp: Date.now() });
                        alert('–ü–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω');
                    });
                }

                // –ù–∞—Ä—É—à–µ–Ω–∏–µ
                const violBtn = document.getElementById('submitViol');
                if (violBtn) {
                    violBtn.addEventListener('click', () => {
                        let uicId = parseInt(document.getElementById('violUic').value);
                        let degree = document.getElementById('violDegree').value;
                        let culprit = document.getElementById('violCulprit').value;
                        let desc = document.getElementById('violDesc').value;
                        let newId = STATE.violations.length + 1;
                        STATE.violations.push({ id: newId, uicId, degree, culprit, desc, photo: '', time: Date.now() });
                        alert('–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ');
                    });
                }

                // –û—Ç—á—ë—Ç
                const reportBtn = document.getElementById('submitReport');
                if (reportBtn) {
                    reportBtn.addEventListener('click', () => {
                        let uicId = parseInt(document.getElementById('reportUic').value);
                        let viol = +document.getElementById('reportViol').value;
                        let voters = +document.getElementById('reportVoters').value;
                        let home = +document.getElementById('reportHomeVoters').value;
                        let homeVisit = document.getElementById('reportHomeVisit').checked;
                        let newId = STATE.reports.length + 1;
                        STATE.reports.push({ id: newId, uicId, violCount: viol, voters, homeVoters: home, homeVisit, date: Date.now() });
                        alert('–û—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
                    });
                }

                // –ü—Ä–æ—Ç–æ–∫–æ–ª
                const protBtn = document.getElementById('submitProtocol');
                if (protBtn) {
                    protBtn.addEventListener('click', () => {
                        let uicId = parseInt(document.getElementById('protocolUic').value);
                        let file = document.getElementById('protocolFile').files[0]?.name || '–ø—Ä–æ—Ç–æ–∫–æ–ª.pdf';
                        let newId = STATE.protocols.length + 1;
                        STATE.protocols.push({ id: newId, uicId, file, date: Date.now() });
                        alert('–ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞–≥—Ä—É–∂–µ–Ω');
                    });
                }

                // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: –æ—Ç–≤–µ—Ç—ã
                document.querySelectorAll('[data-ans-index]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        let idx = e.target.dataset.ansIndex;
                        let step = STATE.idCurrentStep;
                        let q = STATE.idQuestions[step];
                        let ans = q.answers[idx];
                        if (ans.result) {
                            document.getElementById('idResult').innerHTML = `
                                <div class="card" style="background:${ans.violation ? '#ffdddd' : '#ddffdd'}; color:${ans.violation ? '#b91c1c' : '#065f46'};">
                                    <h3 style="font-size:1.5rem;">${ans.result}</h3>
                                </div>`;
                        } else if (ans.next !== undefined) {
                            STATE.idCurrentStep = ans.next;
                            renderContent();
                        }
                    });
                });

                // –°–±—Ä–æ—Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
                const resetId = document.getElementById('resetId');
                if (resetId) {
                    resetId.addEventListener('click', () => {
                        STATE.idCurrentStep = 0;
                        renderContent();
                    });
                }

                // Admin: –¥–æ–±–∞–≤–∏—Ç—å –£–ò–ö
                const addUic = document.getElementById('addUic');
                if (addUic) {
                    addUic.addEventListener('click', () => {
                        let num = document.getElementById('newUicNumber').value;
                        let addr = document.getElementById('newUicAddress').value;
                        let desc = document.getElementById('newUicDesc').value;
                        if (!num || !addr) return;
                        let newId = STATE.uics.length + 1;
                        STATE.uics.push({ id: newId, number: num, address: addr, description: desc, photo: 'https://via.placeholder.com/800x400?text=–ù–æ–≤—ã–π+–£–ò–ö' });
                        renderContent();
                    });
                }

                // Admin: –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
                const addObs = document.getElementById('addObserverBtn');
                if (addObs) {
                    addObs.addEventListener('click', () => {
                        let newObs = generateObserverLogin();
                        STATE.observers.push({ login: newObs.login, password: newObs.password, uicId: 1 });
                        alert(`–î–æ–±–∞–≤–ª–µ–Ω ${newObs.login} / ${newObs.password}`);
                        renderContent();
                    });
                }

                // Admin: –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Ç–µ—Å—Ç–∞
                const addTest = document.getElementById('addTestBtn');
                if (addTest) {
                    addTest.addEventListener('click', () => {
                        let q = document.getElementById('newQuestion').value;
                        let opt1 = document.getElementById('newOpt1').value;
                        let opt2 = document.getElementById('newOpt2').value;
                        let opt3 = document.getElementById('newOpt3').value;
                        let correct = parseInt(document.getElementById('newCorrect').value);
                        if (!q || !opt1 || !opt2 || !opt3) return;
                        let newId = STATE.tests.length + 1;
                        STATE.tests.push({ id: newId, question: q, options: [opt1, opt2, opt3], correct });
                        renderContent();
                    });
                }

                // Admin: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç—ã
                const saveContent = document.getElementById('saveContent');
                if (saveContent) {
                    saveContent.addEventListener('click', () => {
                        STATE.aboutText = document.getElementById('editAbout').value;
                        STATE.contactsText = document.getElementById('editContacts').value;
                        alert('–¢–µ–∫—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
                        renderContent();
                    });
                }

                // Admin: —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞)
                document.querySelectorAll('[data-del-post]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        let id = e.target.dataset.delPost;
                        STATE.observerPosts = STATE.observerPosts.filter(p => p.id != id);
                        renderContent();
                    });
                });
                // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –Ω–∞—Ä—É—à–µ–Ω–∏–π, —Ç–µ—Å—Ç–æ–≤ –∏ —Ç.–¥. (–¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏ –Ω–µ –≤—Å–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞)
            }

            // –¢–µ–º–∞
            document.getElementById('themeToggle').addEventListener('click', () => {
                document.body.classList.toggle('dark');
            });

            renderTabs();
            renderContent();
        })();
    </script>
</body>
</html>